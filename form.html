<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form Pemesanan - Nail Art</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header style="position: relative;">
    <!-- Tombol kembali dalam header -->
    <a href="index.html" class="btn-kembali-header" title="Kembali ke Halaman Utama">‚Üê</a>
    <h1>Pemesanan Nail Art</h1>
    <p>Silakan isi form berikut untuk melakukan pemesanan</p>
  </header>

  <div class="container">
    <form id="formPemesanan">
      <label for="nama">Nama:</label>
      <input type="text" id="nama" name="nama" required>

      <label for="nomor">Nomor WhatsApp:</label>
      <input type="tel" id="nomor" name="nomor" placeholder="08xxxxxxxxxx" required>

      <label for="desain">Pilih Desain:</label>
      <select id="desain" name="desain" required>
        <option value="">-- Pilih --</option>
        <option value="Floral and Sea">Floral and Sea</option>
        <option value="Silver and Black">Silver and Black</option>
      </select>

      <div class="form-row">
        <div>
          <label for="tanggal">Tanggal Booking:</label>
          <input type="date" id="tanggal" name="tanggal" required>
        </div>
        <div>
          <label for="waktu">Waktu Booking:</label>
          <input type="time" id="waktu" name="waktu" required>
        </div>
      </div>

      <label for="catatan">Catatan Tambahan (Opsional):</label>
      <textarea id="catatan" name="catatan" rows="4"></textarea>

      <!-- Tombol submit -->
      <button type="submit" class="ripple-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
             viewBox="0 0 24 24" class="icon">
          <path d="M20 2H4c-1.1 0-2 .9-2 2v16l4-4h14c1.1 
                   0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
        </svg>
        Kirim Pesanan via WhatsApp
      </button>
    </form>
  </div>

  <!-- Ambil desain dari URL -->
  <script>
    const params = new URLSearchParams(window.location.search);
    const desainDipilih = params.get("desain");
    if (desainDipilih) {
      window.addEventListener("DOMContentLoaded", () => {
        document.getElementById("desain").value = desainDipilih;
      });
    }
  </script>

  <!-- Kirim ke WhatsApp -->
  <script>
    document.getElementById("formPemesanan").addEventListener("submit", function(e) {
      e.preventDefault();

      const nama = document.getElementById("nama").value.trim();
      const nomor = document.getElementById("nomor").value.trim();
      const desain = document.getElementById("desain").value;
      const catatan = document.getElementById("catatan").value.trim();
      const tanggal = document.getElementById("tanggal").value;
      const waktu = document.getElementById("waktu").value;

      if (!nomor.startsWith("08")) {
        alert("Nomor WhatsApp harus dimulai dari 08");
        return;
      }

      const nomorToko = "62895806488823";
      const pesan = `*Halooo! Ada pesanan nail art* :
*Nama*: ${nama}
*Nomor Whatsapp*: ${nomor}
*Desain*: ${desain}
*Tanggal Booking*: ${tanggal}
*Waktu Booking*: ${waktu}
*Catatan*: ${catatan || "-"}

Terima kasih!! ü•∞ ‚ù§ Sudah melakukan order! Ditunggu ya, admin akan segera membalas pesan anda ü§©üòÅ

*NOTE:*
Jika admin belum membalas cepat, mungkin sedang melayani customer lain, atau sedang bobok manis üò¥. Tapi tenang, pesanmu tetap kami utamakan ü•á`;

      const urlWA = `https://wa.me/${nomorToko}?text=${encodeURIComponent(pesan)}`;
      window.open(urlWA, "_blank");
    });
  </script>

  <!-- Ripple -->
  <script>
    document.querySelectorAll(".ripple-btn").forEach(button => {
      button.addEventListener("click", function(e) {
        const circle = document.createElement("span");
        circle.classList.add("ripple-circle");
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        circle.style.width = circle.style.height = `${size}px`;
        circle.style.left = `${e.clientX - rect.left - size / 2}px`;
        circle.style.top = `${e.clientY - rect.top - size / 2}px`;
        this.appendChild(circle);
        setTimeout(() => circle.remove(), 600);
      });
    });
  </script>

  <script>
  // Set tanggal minimum = hari ini
  const inputTanggal = document.getElementById("tanggal");
  const inputWaktu = document.getElementById("waktu");

  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const dd = String(today.getDate()).padStart(2, '0');
  const todayStr = `${yyyy}-${mm}-${dd}`;

  inputTanggal.min = todayStr;

  // Saat tanggal dipilih, cek apakah hari ini ‚Üí batasi waktu minimum
  inputTanggal.addEventListener("change", function () {
    const selectedDate = this.value;
    const now = new Date();

    if (selectedDate === todayStr) {
      // Format waktu: HH:MM (24 jam)
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      inputWaktu.min = `${hours}:${minutes}`;
    } else {
      inputWaktu.removeAttribute("min");
    }
  });
</script>

</body>
</html>
